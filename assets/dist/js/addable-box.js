import{e as u}from"./general.js";const p="modulepreload",_=function(d){return"/wp-content/plugins/devhunters-fw/assets/dist/"+d},h={},f=function(c,r,x){let o=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),t=(e==null?void 0:e.nonce)||(e==null?void 0:e.getAttribute("nonce"));o=Promise.allSettled(r.map(i=>{if(i=_(i),i in h)return;h[i]=!0;const l=i.endsWith(".css"),s=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const n=document.createElement("link");if(n.rel=l?"stylesheet":p,l||(n.as="script"),n.crossOrigin="",n.href=i,t&&n.setAttribute("nonce",t),document.head.appendChild(n),l)return new Promise((b,m)=>{n.addEventListener("load",b),n.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${i}`)))})}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return o.then(e=>{for(const t of e||[])t.status==="rejected"&&a(t.reason);return c().catch(a)})};(function(d){class c{constructor(o){this.$_addable_box=o,this._initAddableBox()}_initAddableBox(){this._addBoxItem(),this._removeBoxItem(),this._openCloseBoxItem(),this._changeBoxTitleOnKeyUp(),this._enableSortableBoxes()}_addBoxItem(){const o=this;this.$_addable_box.on("click",".dht-addable-box-repeater .dht-add-box-item",function(a){a.preventDefault();const e=d(this),t=e.siblings(".dht-addable-box-items");if(o._maxBoxItems(t))return;e.addClass("dht-btn-disabled");const i=t.children(":last");let l=i.clone().attr("data-box-item-number",+i.attr("data-box-item-number")+1);const s=l.children(".dht-addable-box-content"),n=l.children(".dht-addable-box-title");n.removeClass("dht-addable-box-active").children(".dht-addable-box-arrow").removeClass("dht-addable-box-icon-change"),s.empty().hide();const b=n.children(".dht-addable-box-title-text");b.text(b.attr("data-default-title")),o._ajaxLoadOptions(t,e,l,s,n)})}_removeBoxItem(){this.$_addable_box.on("click",".dht-addable-box-repeater .dht-btn-remove-box-item",function(o){o.preventDefault();const e=d(this).parents(".dht-addable-box-item"),t=e.parents(".dht-addable-box-repeater");if(t.children(".dht-addable-box-items").children(".dht-addable-box-item").length===1){confirm(t.children(".dht-box-remove-text").text());return}return e.remove(),!1})}_openCloseBoxItem(){const o=this;this.$_addable_box.on("click",".dht-addable-box .dht-addable-box-title",function(a){a.preventDefault();const e=d(this);if(e.hasClass("dht-addable-box-active"))return;const t=e.parent(".dht-addable-box-item");o._boxItemsManipulations(t,e)})}_changeBoxTitleOnKeyUp(){this.$_addable_box.on("keyup",".dht-addable-box-repeater .dht-addable-box-item .dht-box-title",function(o){const a=d(this).val();d(this).parents(".dht-addable-box-content").siblings(".dht-addable-box-title").children(".dht-addable-box-title-text").text(a)})}_enableSortableBoxes(){this.$_addable_box.hasClass("dht-field-child-addable-box-sortable")&&this.$_addable_box.children(".dht-addable-box-repeater").children(".dht-addable-box-items").sortable({containment:"parent",forcePlaceholderSize:!0,handle:".dht-addable-box-title",placeholder:"sortable-placeholder"})}_ajaxLoadOptions(o,a,e,t,i){const l=this;d.ajax({url:dht_framework_info.ajax_url,type:"POST",dataType:"json",data:{action:"getAddableBoxOptions",post_id:d('#post_ID[name="post_ID"]').val(),data:{group:a.siblings(".dht-box-item-options").val(),box_number:e.attr("data-box-item-number")}},beforeSend:function(){a.siblings(".spinner").css("visibility","visible")},success:function(s){s.success?(o.append(e),t.append(s.data),setTimeout(function(){f(()=>import("./ajax-options-reload.js"),[]).then(n=>{const{dhtReinitializeOptions:b}=n;b(t)}).catch(n=>{u(n)})},100),l._boxItemsManipulations(e,i)):console.error("Ajax Response",s)},error:function(s){console.error("AJAX error:",s)},complete:function(){a.siblings(".spinner").css("visibility","hidden"),a.removeClass("dht-btn-disabled")}})}_maxBoxItems(o){return+o.attr("data-max-box-items")>=o.length?(confirm(o.siblings(".dht-max-box-items").text()),!0):!1}_boxItemsManipulations(o,a){const e=o.siblings(".dht-addable-box-item"),t=e.children(".dht-addable-box-title");t.removeClass("dht-addable-box-active"),t.children(".dht-addable-box-arrow").removeClass("dht-addable-box-icon-change"),e.children(".dht-addable-box-content").slideUp(400),a.toggleClass("dht-addable-box-active"),a.next().slideToggle(),a.children(".dht-addable-box-arrow").toggleClass("dht-addable-box-icon-change")}}function r(){d(".dht-field-wrapper-addable-box .dht-field-child-addable-box").each(function(){new c(d(this))})}d(function(){r()}),d(document).on("dht_addableBoxAjaxComplete",function(){r()})})(jQuery);const g=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{f as _,g as a};
