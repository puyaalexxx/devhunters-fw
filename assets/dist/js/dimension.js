import{_ as h}from"./addable-box.js";import{e as m}from"./general.js";(function(t){class g{constructor(i){this.$_dimension=i,this.$_colorpicker=this.$_dimension.find(".dht-colorpicker")??"",this.$_border_style=this.$_dimension.find(".dht-dimension-border-style")??"",this.$_units=this.$_dimension.find(".dht-dimension-unit")??"",this._initDimension().then(()=>{}).catch(r=>{console.error(r)}),this._liveEditing().then(()=>{}).catch(r=>{console.error(r)})}async _initDimension(){if(this.$_colorpicker.length!==0)try{const{dhtInitColorpicker:i}=await h(async()=>{const{dhtInitColorpicker:r}=await import("./colorpicker-utilities.js");return{dhtInitColorpicker:r}},[]);this.$_dimension.find(".dht-colorpicker").each(function(){i(t(this))})}catch(i){m(i)}}async _liveEditing(){const i=this;if((this.$_dimension.attr("data-live-selectors")??"").length)try{let r=function(n,e,o,s,c){e==="border"?(t(n).css({"border-width":o}),t(n).css({"border-style":s}),t(n).css({"border-color":c})):c.length>0?t(n).css({[e]:o+" "+c}):t(n).css({[e]:o})},f=function(n,e){i.$_dimension.on("input change",".dht-dimension",function(o){o.stopPropagation();const s=p(t(this),a());r(e,n,s,_(),u())})},d=function(){i.$_dimension.find(".dht-dimension-input-size-1").trigger("change")},a=function(){return i.$_units.length>0&&String(i.$_units.val())||"px"},u=function(){return i.$_colorpicker.length>0&&String(i.$_colorpicker.val())||""},_=function(){return i.$_border_style.length>0&&String(i.$_border_style.val())||"solid"},p=function(n,e){return v.map(o=>{if(n.hasClass(o)){const s=String(n.val()??"");return s.length===0?0:s+e}else{const s=i.$_dimension.find(o);if(s.length>0){const c=String(s.val());return c.length===0?0:c+e}}}).join(" ")};const{dhtApplyChangesForKeyedSelectors:y,dhtRestoreElementDefaultValues:C}=await h(async()=>{const{dhtApplyChangesForKeyedSelectors:n,dhtRestoreElementDefaultValues:e}=await import("./live-editing.js");return{dhtApplyChangesForKeyedSelectors:n,dhtRestoreElementDefaultValues:e}},[]),{dhtOnChangeColorpicker:$}=await h(async()=>{const{dhtOnChangeColorpicker:n}=await import("./colorpicker-utilities.js");return{dhtOnChangeColorpicker:n}},[]),v=[".dht-dimension-input-size-1",".dht-dimension-input-size-2",".dht-dimension-input-size-3",".dht-dimension-input-size-4"];y(this.$_dimension,(n,e,o)=>{e==="style"&&(n==="border"&&this.$_border_style.length&&t(this.$_border_style).on("change",function(){d()}),this.$_colorpicker.length!==0&&$(this.$_colorpicker,s=>{d()}),this.$_units.length&&t(this.$_units).on("change",function(){d()}),f(n,o))},(n,e,o)=>{if(e==="style"){const s=u(),c=_(),D=p(t(),a());C(this.$_dimension,()=>{r(o,n,D,c,s)})}})}catch(r){m(r)}}}function l(){t(".dht-field-wrapper-dimension").each(function(){new g(t(this))})}t(function(){l()}),t(document).on("dht_dimensionAjaxComplete",function(){l()})})(jQuery);
