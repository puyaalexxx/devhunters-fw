(function(e){class o{constructor(t){this.$_multioptions=t,this.$_dropdown=this.$_multioptions.find(".dht-multioptions"),this.$_input_text=this.$_dropdown.attr("data-input-text"),this.$_selected_values=this.$_dropdown.attr("data-values")??"",this.$_minimumInputLength=this.$_dropdown.attr("data-minimumInputLength")??3,this._setSelectedValues(),this._useAjax(),this._bindInputFocus()}_setSelectedValues(){if(this.$_selected_values.length>0){const t=this.$_selected_values.split(",");this.$_dropdown.val(t)}}_bindInputFocus(){this.$_dropdown.off("focus").on("focus",function(){e(this).val("")})}_useAjax(){if(this.$_dropdown.attr("data-ajax-enabled")==="yes"){const t=this.$_dropdown.attr("data-ajax-action");if(t.length===0)return console.error("No ajax action function provided"),!1;this.$_dropdown.select2({minimumInputLength:+this.$_minimumInputLength,placeholder:this.$_input_text,allowClear:!0,ajax:{url:dht_framework_info.ajax_url,dataType:"json",delay:250,type:"POST",data:function(n){return{action:t,term:n.term}},processResults:function(n){return console.log(n),{results:n}},cache:!0}})}else this.$_dropdown.select2({placeholder:this.$_input_text,minimumInputLength:+this.$_minimumInputLength,allowClear:!0});return!0}}function i(){e(".dht-field-wrapper-multioptions").each(function(){new o(e(this))})}e(function(){i()}),e(document).on("dht_multiOptionsAjaxComplete",function(){i()})})(jQuery);
