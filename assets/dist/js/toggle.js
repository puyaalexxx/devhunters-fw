import{_ as g}from"./addable-box.js";import{e as c}from"./general.js";(function(l){class r{constructor(e){this.$_toggle=e,this._initToggle()}_initToggle(){const e=this;this.$_toggle.off("click",".dht-toggle").on("click",".dht-toggle",function(){const t=l(this),i=t.children("input");if(t.hasClass("dht-slider-on")){t.removeClass("dht-slider-on").addClass("dht-slider-off");let s=t.children(".dht-slider").children(".dht-slider-no").attr("data-value");i.val(s),e._liveEditing(s).then(()=>{}).catch(d=>{console.error(d)})}else{t.removeClass("dht-slider-off").addClass("dht-slider-on");let s=t.children(".dht-slider").children(".dht-slider-yes").attr("data-value");i.val(s),e._liveEditing(s).then(()=>{}).catch(d=>{console.error(d)})}e._showHideOptions(t)})}_showHideOptions(e){const t=e.children("input").attr("value");e.siblings(".dht-toggle-content").each(function(){const i=l(this);i.removeClass("dht-toggle-show"),i.attr("data-toggle-value")===t&&i.addClass("dht-toggle-show")})}async _liveEditing(e){if((this.$_toggle.attr("data-live-selectors")??"").length)try{let t=function(o,n,a){n===a?l(o).show():l(o).hide()};const{dhtApplyChangesForKeyedSelectors:i,dhtRestoreElementDefaultValues:s,dhtGetDefaultValue:d}=await g(async()=>{const{dhtApplyChangesForKeyedSelectors:o,dhtRestoreElementDefaultValues:n,dhtGetDefaultValue:a}=await import("./live-editing.js");return{dhtApplyChangesForKeyedSelectors:o,dhtRestoreElementDefaultValues:n,dhtGetDefaultValue:a}},[]);i(this.$_toggle,(o,n,a)=>{n==="display"&&t(a,o,e)},(o,n,a)=>{n==="display"&&s(this.$_toggle,()=>{t(a,o,d(this.$_toggle))})})}catch(t){c(t)}}}function h(){l(".dht-field-wrapper-toggle").each(function(){new r(l(this))})}l(function(){h()}),l(document).on("dht_toggleAjaxComplete",function(){h()})})(jQuery);
