(function(i){class s{constructor(t){this.$_upload=t,this._uploadItem(),this._removeItemOnInput()}_uploadItem(){const t=this;this.$_upload.off("click",".dht-upload-item-button").on("click",".dht-upload-item-button",function(){const e=i(this),n=e.siblings(".dht-upload-item-hidden"),d=e.attr("data-media-text"),u=e.attr("data-media-type"),a=wp.media({title:d,button:{text:d},library:{type:u},multiple:!1});a.off("select").on("select",function(){const o=a.state().get("selection").first().toJSON();e.siblings(".dht-upload-item").attr("value",o.url),e.siblings(".dht-upload-item").val(o.url),n.val(o.id)}),a.open(),t._preSelectItems(n,a)})}_removeItemOnInput(){this.$_upload.off("input",".dht-upload-item").on("input",".dht-upload-item",function(){const t=i(this);t.val()===""&&(t.siblings(".dht-upload-item-hidden").val(""),t.attr("value","")),t.val().length>0&&t.attr("value",t.val())})}_preSelectItems(t,e){+t.val()>0&&e.state().get("selection").add(wp.media.attachment(t.val()))}}function l(){i(".dht-field-wrapper-upload-item").each(function(){new s(i(this))})}i(function(){l()}),i(document).on("dht_uploadAjaxComplete",function(){l()})})(jQuery);
