{"version":3,"file":"scripts/js/create-sidebars.js","mappings":"yHAEUA,EAMN,E,mBANMA,EA2HP,IArHC,aAMI,aAEIC,KAAKC,YAAcF,EAAE,kBAErBC,KAAKE,gBAAkBH,EAAE,aAEzBC,KAAKG,eAAiBH,KAAKC,YAAYG,KAAK,uBAE5CJ,KAAKK,cAAgBN,EAAE,oBAEvBC,KAAKM,eACLN,KAAKO,gBACLP,KAAKQ,cACLR,KAAKS,mBACT,CA4FJ,OArFY,YAAAH,aAAR,WACIN,KAAKC,YAAYS,MAAMV,KAAKE,iBAC5BF,KAAKE,gBAAgBS,MACzB,EAOQ,YAAAJ,cAAR,WACI,IAAIK,EAAQZ,KAEZA,KAAKG,eAAeU,MAAK,WACrB,IAAIC,EAAaF,EAAMP,cAAcU,QAErC,IAAOf,MAAMI,KAAK,sBAAsBY,OAAOF,GAE/CA,EAAWH,MACf,GACJ,EAOQ,YAAAH,YAAR,WAEIR,KAAKG,eAAeC,KAAK,2BAA2Ba,GAAG,SAAS,WAC/ClB,EAAEC,MAAMkB,QAAQ,oBAEtBd,KAAK,mEAAmEO,OAE/EZ,EAAEC,MAAMmB,MACZ,IAGAnB,KAAKG,eAAeC,KAAK,kCAAkCa,GAAG,SAAS,WACtDlB,EAAEC,MAAMkB,QAAQ,oBAEtBd,KAAK,2BAA2BO,OAEvCZ,EAAEC,MAAMmB,OACRpB,EAAEC,MAAMoB,SAAS,mCAAmCD,MACxD,GACJ,EAEO,YAAAV,kBAAP,WAEIT,KAAKG,eAAeC,KAAK,mCAAmCa,GAAG,SAAS,WACpE,IAAII,EAAoBtB,EAAEC,MAAMkB,QAAQ,uBACpCI,EAAUD,EAAkBjB,KAAK,0BAGjCmB,EAAaF,EAAkBG,SAAS,sBAAsBC,KAAK,MA2BvE,OAzBA1B,EAAE2B,KAAK,CAEHC,IAAKC,0BAA0BC,SAC/BC,KAAM,OACNC,KAAM,CACFC,OAAQ,mBACRD,KAAM,CAAER,WAAYA,IAExBU,WAAY,WAERX,EAAQY,IAAI,aAAc,UAC9B,EACAC,QAAS,SAASC,GAEVA,EAASD,QACTE,SAASC,SAETC,QAAQC,IAAI,gBAAiBJ,EAErC,EACAK,MAAO,SAASA,GACZF,QAAQE,MAAM,cAAeA,EACjC,KAGG,CACX,GACJ,EACJ,EAhHA,GAkHA1C,GAAE,WACE,IAAI2C,CACR,G","sources":["webpack:///./assets/scripts/ts/modules/extensions/sidebars/create-sidebars.ts"],"sourcesContent":["import jQuery from \"jquery\";\n\n(function($: JQueryStatic): void {\n    \"use strict\";\n\n    /**\n     * Class used to create and delete custom sidebars\n     */\n    class DhtWidgetAreas {\n        private _widgetArea: JQuery<HTMLElement>;\n        private readonly _widgetTemplate: JQuery<HTMLElement>;\n        private readonly _deleteButton: JQuery<HTMLElement>;\n        private readonly _customSidebar: JQuery<HTMLElement>;\n\n        constructor() {\n            //where to attach widgets area form\n            this._widgetArea = $(\"#widgets-right\");\n            //my form id\n            this._widgetTemplate = $(\"#dht-wrap\");\n            // custom sidebars\n            this._customSidebar = this._widgetArea.find(\".sidebar-dht-custom\");\n            //delete area\n            this._deleteButton = $(\".dht-wrap-delete\");\n\n            this._addFormHtml();\n            this._addDelButton();\n            this._bindEvents();\n            this.deleteSidebarAjax();\n        }\n\n        /**\n         * Adding the widget area form below sidebars area\n         *\n         * @return void\n         */\n        private _addFormHtml(): void {\n            this._widgetArea.after(this._widgetTemplate);\n            this._widgetTemplate.show();\n        }\n\n        /**\n         * Adding delete area to each added sidebar\n         *\n         * @return void\n         */\n        private _addDelButton(): void {\n            let $this = this;\n\n            this._customSidebar.each(function() {\n                let deleteForm = $this._deleteButton.clone();\n\n                jQuery(this).find(\".widgets-sortables\").append(deleteForm);\n\n                deleteForm.show();\n            });\n        }\n\n        /**\n         * Show confirm / cancel buttons and vice versa\n         *\n         * @return void\n         */\n        private _bindEvents() {\n            //display confirm / cancel buttons\n            this._customSidebar.find(\".dht-widget-area-delete\").on(\"click\", function() {\n                let parent = $(this).parents(\".dht-wrap-delete\");\n\n                parent.find(\".dht-widget-area-delete-cancel, .dht-widget-area-delete-confirm\").show();\n\n                $(this).hide();\n            });\n\n            //display delete button\n            this._customSidebar.find(\".dht-widget-area-delete-cancel\").on(\"click\", function() {\n                let parent = $(this).parents(\".dht-wrap-delete\");\n\n                parent.find(\".dht-widget-area-delete\").show();\n\n                $(this).hide();\n                $(this).siblings(\".dht-widget-area-delete-confirm\").hide();\n            });\n        }\n\n        public deleteSidebarAjax() {\n            //delete sidebar on clicking confirm button\n            this._customSidebar.find(\".dht-widget-area-delete-confirm\").on(\"click\", function() {\n                let sidebar_container = $(this).parents(\".sidebar-dht-custom\");\n                let spinner = sidebar_container.find(\".sidebar-name .spinner\");\n\n                //get sidebar id\n                let sidebar_id = sidebar_container.children(\".widgets-sortables\").attr(\"id\");\n\n                $.ajax({\n                    //@ts-ignore\n                    url: dht_remove_sidebar_object.ajax_url,\n                    type: \"POST\",\n                    data: {\n                        action: \"deleteWidgetArea\", // The name of your AJAX action\n                        data: { sidebar_id: sidebar_id },\n                    },\n                    beforeSend: function() {\n                        //show loading spinner\n                        spinner.css(\"visibility\", \"visible\");\n                    },\n                    success: function(response) {\n                        // Refresh the current page\n                        if (response.success) {\n                            location.reload();\n                        } else {\n                            console.log(\"Ajax Response\", response);\n                        }\n                    },\n                    error: function(error) {\n                        console.error(\"AJAX error:\", error);\n                    },\n                });\n\n                return false;\n            });\n        }\n    }\n\n    $(function(): void {\n        new DhtWidgetAreas();\n    });\n})(jQuery);\n"],"names":["$","this","_widgetArea","_widgetTemplate","_customSidebar","find","_deleteButton","_addFormHtml","_addDelButton","_bindEvents","deleteSidebarAjax","after","show","$this","each","deleteForm","clone","append","on","parents","hide","siblings","sidebar_container","spinner","sidebar_id","children","attr","ajax","url","dht_remove_sidebar_object","ajax_url","type","data","action","beforeSend","css","success","response","location","reload","console","log","error","DhtWidgetAreas"],"sourceRoot":""}