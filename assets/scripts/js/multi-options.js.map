{"version":3,"file":"scripts/js/multi-options.js","mappings":"mIAEA,SAAUA,GAGN,iBAQI,WAAYC,GAERC,KAAKC,eAAiBF,EAEtBC,KAAKE,WAAaF,KAAKC,eAAeE,SAAS,qBAC/CH,KAAKI,aAAeJ,KAAKE,WAAWG,KAAK,mBACzCL,KAAKM,kBAAoBN,KAAKE,WAAWG,KAAK,eAC9CL,KAAKO,sBAAwBP,KAAKE,WAAWG,KAAK,2BAGlDL,KAAKQ,qBAGLR,KAAKS,WAGLT,KAAKU,iBACT,CAoFJ,OA7EY,YAAAF,mBAAR,WACI,GAAIR,KAAKM,kBAAkBK,OAAS,EAAG,CACnC,IAAMC,EAAoBZ,KAAKM,kBAAkBO,MAAM,KAEvDb,KAAKE,WAAWY,IAAIF,EACxB,CACJ,EAOQ,YAAAF,gBAAR,WACIV,KAAKE,WAAWa,IAAI,SAASC,GAAG,SAAS,WAErClB,EAAEE,MAAMc,IAAI,GAChB,GACJ,EAOQ,YAAAL,SAAR,WACI,GAAkD,QAA9CT,KAAKE,WAAWG,KAAK,qBAAgC,CAErD,IAAM,EAAcL,KAAKE,WAAWG,KAAK,oBAGzC,GAA2B,IAAvB,EAAYM,OAGZ,OAFAM,QAAQC,MAAM,qCAEP,EAIXlB,KAAKE,WAAWiB,QAAQ,CACpBC,mBAAoBpB,KAAKO,qBACzBc,YAAarB,KAAKI,aAClBkB,YAAY,EACZC,KAAM,CAEFC,IAAKC,wBAAwBC,SAC7BC,SAAU,OACVC,MAAO,IACPC,KAAM,OACNC,KAAM,SAASC,GACX,MAAO,CACHC,OAAQ,EAERC,KAAMF,EAAOE,KAErB,EACAC,eAAgB,SAASJ,GAGrB,OAFAb,QAAQkB,IAAIL,GAEL,CACHM,QAASN,EAEjB,EACAO,OAAO,IAGnB,MAGIrC,KAAKE,WAAWiB,QAAQ,CACpBE,YAAarB,KAAKI,aAClBgB,mBAAoBpB,KAAKO,qBACzBe,YAAY,IAIpB,OAAO,CACX,EACJ,EA7GA,GAgHA,SAASgB,IACLxC,EAAE,oDAAoDyC,MAAK,WACvD,IAAIC,EAAa1C,EAAEE,MACvB,GACJ,CAGAF,GAAE,WACEwC,GACJ,IAGAxC,EAAE2C,UAAUzB,GAAG,gCAAgC,WAC3CsB,GACJ,GACH,CAlID,C,MAkIG,G","sources":["webpack:///./assets/scripts/ts/modules/extensions/options/fields/multi-options.ts"],"sourcesContent":["import jQuery from \"jquery\";\n\n(function($: JQueryStatic): void {\n    \"use strict\";\n\n    class MultiOptions {\n        //multioptions reference\n        private $_multioptions;\n        private $_dropdown;\n        private readonly $_input_text;\n        private $_selected_values;\n        private readonly $_minimumInputLength;\n\n        constructor($multioptions: JQuery<HTMLElement>) {\n            //multioptions reference\n            this.$_multioptions = $multioptions;\n\n            this.$_dropdown = this.$_multioptions.children(\".dht-multioptions\");\n            this.$_input_text = this.$_dropdown.attr(\"data-input-text\");\n            this.$_selected_values = this.$_dropdown.attr(\"data-values\")!;\n            this.$_minimumInputLength = +this.$_dropdown.attr(\"data-minimumInputLength\")!;\n\n            //set selected values\n            this._setSelectedValues();\n\n            //if ajax is enabled\n            this._useAjax();\n\n            // Bind focus event to input field\n            this._bindInputFocus();\n        }\n\n        /**\n         * set selected values\n         *\n         * @return void\n         */\n        private _setSelectedValues(): void {\n            if (this.$_selected_values.length > 0) {\n                const predefined_values = this.$_selected_values.split(\",\");\n\n                this.$_dropdown.val(predefined_values);\n            }\n        }\n\n        /**\n         * Bind focus event to input field\n         *\n         * @return void\n         */\n        private _bindInputFocus(): void {\n            this.$_dropdown.off(\"focus\").on(\"focus\", function() {\n                // Reset the input field value\n                $(this).val(\"\");\n            });\n        }\n\n        /**\n         * ajax functionality\n         *\n         * @return void\n         */\n        private _useAjax(): boolean {\n            if (this.$_dropdown.attr(\"data-ajax-enabled\") === \"yes\") {\n                //get ajax action function to retrieve the dropdown values on search\n                const ajax_action = this.$_dropdown.attr(\"data-ajax-action\")!;\n\n                //if no ajax action provided, skip ajax\n                if (ajax_action.length === 0) {\n                    console.error(\"No ajax action function provided\");\n\n                    return false;\n                }\n\n                // Initialize Select2 with AJAX\n                this.$_dropdown.select2({\n                    minimumInputLength: this.$_minimumInputLength, // Set minimum input length to 1 to trigger AJAX after typing\n                    placeholder: this.$_input_text, // Placeholder text\n                    allowClear: true, // Allow clearing the selection\n                    ajax: {\n                        //@ts-ignore\n                        url: dht_framework_ajax_info.ajax_url,\n                        dataType: \"json\",\n                        delay: 250,\n                        type: \"POST\",\n                        data: function(params) {\n                            return {\n                                action: ajax_action,\n                                //text typed in the input field\n                                term: params.term,\n                            };\n                        },\n                        processResults: function(data) {\n                            console.log(data);\n\n                            return {\n                                results: data,\n                            };\n                        },\n                        cache: true,\n                    },\n                });\n            }\n            //simple multioptions drodpwon without ajax\n            else {\n                this.$_dropdown.select2({\n                    placeholder: this.$_input_text, // Placeholder text\n                    minimumInputLength: this.$_minimumInputLength,\n                    allowClear: true, // Allow clearing the selection\n                });\n            }\n\n            return true;\n        }\n    }\n\n    //init each multioptions option\n    function init() {\n        $(\".dht-field-wrapper .dht-field-child-multioptions\").each(function() {\n            new MultiOptions($(this));\n        });\n    }\n\n    // Initialize on page load\n    $(function() {\n        init();\n    });\n\n    // Initialize after AJAX content is loaded\n    $(document).on(\"dht_multiOptionsAjaxComplete\", function() {\n        init();\n    });\n})(jQuery);\n"],"names":["$","$multioptions","this","$_multioptions","$_dropdown","children","$_input_text","attr","$_selected_values","$_minimumInputLength","_setSelectedValues","_useAjax","_bindInputFocus","length","predefined_values","split","val","off","on","console","error","select2","minimumInputLength","placeholder","allowClear","ajax","url","dht_framework_ajax_info","ajax_url","dataType","delay","type","data","params","action","term","processResults","log","results","cache","init","each","MultiOptions","document"],"sourceRoot":""}