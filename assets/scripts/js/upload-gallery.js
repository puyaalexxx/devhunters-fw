"use strict";(self.webpackChunkdevhunters_fw=self.webpackChunkdevhunters_fw||[]).push([[3357],{2620:(t,e,i)=>{i.r(e);var n=i(1669),a=i.n(n);!function(t){var e=function(){function e(t){this.$_gallery=t,this._uploadGallery(),this._removeGalleryImage(),this._onSortImages()}return e.prototype._uploadGallery=function(){var t=this;this.$_gallery.off("click",".dht-upload-gallery-button").on("click",".dht-upload-gallery-button",(function(){var e=a()(this),i=e.siblings(".dht-upload-gallery-hidden"),n=e.attr("data-media-text"),l=wp.media({title:n,button:{text:n},library:{type:"image"},multiple:!0});t._onSelectImages(e,i,l),l.open(),t._preSelectImages(i,l)}))},e.prototype._removeGalleryImage=function(){var e=this;this.$_gallery.off("click",".dht-gallery-group .dht-img-remove-icon").on("click",".dht-gallery-group .dht-img-remove-icon",(function(){var i=t(this).parents(".dht-gallery-group").siblings(".dht-upload-gallery-hidden"),n=t(this).siblings("img").attr("data-id"),a=e._getHiddenInputValues(i);a.length>0&&a.indexOf(n)>-1&&(a.splice(a.indexOf(n),1),i.val(a.join(","))),t(this).parent(".dht-img-remove").remove()}))},e.prototype._onSelectImages=function(t,e,i){i.off("select").on("select",(function(){var n=t.siblings(".dht-gallery-group");n.empty();for(var a=i.state().get("selection").toJSON(),l=[],o=[],r=0;r<a.length;r++)l.push(a[r].id),o.push({id:a[r].id,url:a[r].url});e.val(l.join(",")),o.forEach((function(t){n.append('<span class="dht-img-remove"><span class="dht-img-remove-icon"></span><img data-id="'+t.id+'" src="'+t.url+'" alt="" width="100" height="100" /></span>')}))}))},e.prototype._preSelectImages=function(t,e){var i=this._getHiddenInputValues(t);if(i.length>0){var n=e.state().get("selection");i.forEach((function(t){var e=wp.media.attachment(t);e.fetch(),n.add(e?[e]:[])}))}},e.prototype._onSortImages=function(){this.$_gallery.children(".dht-gallery-group").sortable({containment:"parent",update:function(e,i){var n=t(this).children(".dht-img-remove").map((function(){return t(this).find("img").attr("data-id")})).get();t(this).siblings(".dht-upload-gallery-hidden").val(n.join(","))}}).disableSelection()},e.prototype._getHiddenInputValues=function(t){var e=String(t.val()),i=[];return e.length>0&&(i=e.split(",")),i},e}();function i(){t(".dht-field-wrapper .dht-field-child-upload-gallery").each((function(){new e(t(this))}))}t((function(){i()})),t(document).on("dht_uploadGalleryAjaxComplete",(function(){i()}))}(a())}}]);
//# sourceMappingURL=upload-gallery.js.map